{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,KAAKC,OAAO,a,aCExD,SAASC,EAAcC,GAAkB,IAAAC,EACjCC,EAAO,qBACb,IAAKF,EAAwBG,QAAQD,GAArC,CACCF,EAAwBG,QAAQD,GAAQ,IAEzC,IAAME,EAAK,SAACC,EAAeC,EAAcC,GACvC,IAAMC,EAAIC,SAASC,cAAc,UAYjC,OAXAF,EAAEG,KAAO,SACTH,EAAEI,UAAY,sBACdJ,EAAEH,MAAQA,EACVG,EAAEK,UAAY,aAAaP,EAAI,SAC/BE,EAAEM,iBAAiB,QAAS,SAACC,GAC3BA,EAAEC,iBACF,IAAMC,EAASR,SAASS,cAAc,4CACjCD,IACLA,EAAOE,QACPZ,IACF,GACOC,CACT,EAEMY,EAAWhB,EAAGiB,IAAAA,WAAeC,MAAM,gDAAsE,mBAAoB,WACjIb,SAASc,YAAY,cAAc,EAAO,gBAC5C,GAEMC,EAAYpB,EAAGiB,IAAAA,WAAeC,MAAM,uCAA6D,gBAAiB,WACtHb,SAASc,YAAY,cAAc,EAAO,KAC5C,GAEME,EAA6C,OAAxCxB,EAAGD,EAAQkB,cAAc,iBAAejB,EAAID,EACvDyB,EAAMC,YAAYN,GAClBK,EAAMC,YAAYF,EA7BgC,CA8BpD,CAEAH,IAAAA,aAAiBM,IAAI,yBAA0B,WAC7C,IAAMC,EAAQ,WAAH,OAASnB,SAASoB,iBAAiB,2BAA2BC,QAAQ/B,EAAc,EAC/F6B,IACA,IAAIG,iBAAiBH,GAAOI,QAAQvB,SAASwB,KAAM,CAAEC,WAAW,EAAMC,SAAS,GACjF,E","sources":["webpack://lady-byron-more-format/webpack/bootstrap","webpack://lady-byron-more-format/webpack/runtime/compat get default export","webpack://lady-byron-more-format/webpack/runtime/define property getters","webpack://lady-byron-more-format/webpack/runtime/hasOwnProperty shorthand","webpack://lady-byron-more-format/external root \"flarum.core.compat['forum/app']\"","webpack://lady-byron-more-format/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","import app from 'flarum/forum/app';\n\nfunction injectButtons(toolbar: Element) {\n  const mark = 'lb-morefmt-mounted';\n  if ((toolbar as HTMLElement).dataset[mark]) return;\n  (toolbar as HTMLElement).dataset[mark] = '1';\n\n  const mk = (title: string, icon: string, onClick: () => void) => {\n    const b = document.createElement('button');\n    b.type = 'button';\n    b.className = 'Button Button--icon';\n    b.title = title;\n    b.innerHTML = `<i class=\"${icon}\"></i>`;\n    b.addEventListener('click', (e) => {\n      e.preventDefault();\n      const editor = document.querySelector('.RichText-editor[contenteditable=\"true\"]') as HTMLElement | null;\n      if (!editor) return;\n      editor.focus();\n      onClick();\n    });\n    return b;\n  };\n\n  const btnBlank = mk(app.translator.trans('lady-byron-more-format.forum.blank_paragraph') as unknown as string, 'fas fa-paragraph', () => {\n    document.execCommand('insertHTML', false, '<p>&nbsp;</p>');\n  });\n\n  const btnIndent = mk(app.translator.trans('lady-byron-more-format.forum.indent') as unknown as string, 'fas fa-indent', () => {\n    document.execCommand('insertText', false, '\\u3000\\u3000');\n  });\n\n  const group = toolbar.querySelector('.ButtonGroup') ?? toolbar;\n  group.appendChild(btnBlank);\n  group.appendChild(btnIndent);\n}\n\napp.initializers.add('lady-byron/more-format', () => {\n  const mount = () => document.querySelectorAll('.RichTextEditor-toolbar').forEach(injectButtons);\n  mount();\n  new MutationObserver(mount).observe(document.body, { childList: true, subtree: true });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","injectButtons","toolbar","_toolbar$querySelecto","mark","dataset","mk","title","icon","onClick","b","document","createElement","type","className","innerHTML","addEventListener","e","preventDefault","editor","querySelector","focus","btnBlank","app","trans","execCommand","btnIndent","group","appendChild","add","mount","querySelectorAll","forEach","MutationObserver","observe","body","childList","subtree"],"sourceRoot":""}